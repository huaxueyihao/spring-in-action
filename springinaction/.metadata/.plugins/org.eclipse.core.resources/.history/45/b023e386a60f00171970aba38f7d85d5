package com.springinaction.springidol;

import org.aspectj.lang.ProceedingJoinPoint;

/**
 * 
 * @ClassName: Audience 
 * @Description: 观众的切面类
 * @author mao
 * @date 2017年3月23日 下午4:07:01 
 *
 */
public class Audience {
	
	public void takeSeats(){
		//表演之前
		System.out.println("观众开始入座！");
	}
	
	public void turnOffCellPhones(){
		//表演之前
		System.out.println("观众正在坐着");
	}
	
	public void applaud(){
		//表演之后
		System.out.println("表演完后，鼓掌！鼓掌！鼓掌！");
	}
	
	public void demandRefund(){
		//表演失败之后
		System.out.println("表演失败，我们要退钱！");
	}
	
	//环绕通知
	public void watchPerformance(ProceedingJoinPoint joinpoint){
		try {
			System.out.println("观众正在坐在自己的位置上---表演之前");
			System.out.println("观众关闭他们的手机---表演之前");
			long start = System.currentTimeMillis();
			
			joinpoint.proceed();
			
			long end=System.currentTimeMillis();
			
			System.out.println("表演很精彩，大家鼓掌....");
			System.out.println("表演耗时:"+(end-start)+"毫秒");
			
			
		} catch (Throwable e) {
			// TODO 自动生成的 catch 块
			e.printStackTrace();
		}
		
		
	}
	
	
}
